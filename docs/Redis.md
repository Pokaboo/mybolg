## Redis

### 什么是NoSQL
- Not Only Sql
- 高性能读取
- 高可用
- 存储数据、缓存
- 水平（横向）扩展方便高效

### 分布式缓存
- 提升读取速度性能
- 分布式计算领域
- 降低数据库查询压力
- 跨服务器缓存
- 内存式缓存

### Redis是什么
- Redis是现在最受欢迎的NoSQL数据库之一，Redis是一个使用ANSI C编写的开源、包含多种数据结构、支持网络、基于内存、可选持久性的键值对存储数据库，其具备如下特性：
    - 基于内存运行，性能高效
    - 支支持分布式，理论上可以无限扩展
    - key-value存储系统
    - 开源的使用ANSI C语言编写、遵守BSD协议、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库，并提供多种语言的API
- Redis 的应用场景包括：缓存系统（“热点”数据：高频读、低频写）、计数器、消息队列系统、排行榜、社交网络和实时系统
- Redis提供的数据类型主要分为5种自有类型和一种自定义类型，这5种自有类型包括：String类型、哈希类型、列表类型、集合类型和顺序集合类型。

### 缓存方案对比
- Ehcache
    - 优点：
        - 基于java开发 
        - 基于jvm
        - 简单、轻巧、方便
    - 缺点：
        - 集群不支持
        - 分布式不支持

- Mencache
    - 优点：
        - 简单的key-value存储
        - 内存使用率比较高
        - 多核处理，多线程
    - 缺点：
        - 无法容灾
        - 无法持久化

- Redis
    - 优点：
        - 丰富的数据结构
        - 持久化
        - 内存数据库
        - 主从同步，故障转移
    - 缺点：
        - 单线程
        - 单核 
    
###  阻塞与非阻塞
- IO的方式通常分为几种，同步阻塞的BIO、同步非阻塞的NIO、异步非阻塞的AIO。
    - BIO:同步并阻塞，服务器实现模式为一个连接一个线程，即客户端有连接请求时服务器端就需要启动一个线程进行处理，如果这个连接不做任何事情会造成不必要的线程开销，当然可以通过线程池机制改善。每一个线程守着一个IO通道，当没有IO时这个线程就阻塞着，一旦有IO事件发生，这个线程就开始工作
    - NIO:同步非阻塞，服务器实现模式为一个请求一个线程，即客户端发送的连接请求都会注册到多路复用器上，多路复用器轮询到连接有I/O请求时才启动一个线程进行处理。socket主要的读、写、注册和接受函数，在等待就绪阶段都是非阻塞的，真正的IO操作是同步阻塞的。将每个连接(IO通道)都注册到Selector多路复用器上，告诉复用器我已经连接了，如果有IO事件发生，你就通知我。Selector就不断地调用select函数，去访问每一个通道看那个通道有IO事件发生，如果发生了就通知，内核开启一个对应事件的线程去工作
    - AIO :异步非阻塞，服务器实现模式为一个有效请求一个线程，客户端的I/O请求都是由OS先完成了再通知服务器应用去启动线程进行处理。当进行读写操作时，只须直接调用API的read或write方法即可。这两种方法均为异步的，对于读操作而言，当有流可读取时，操作系统会将可读的流传入read方法的缓冲区，并通知应用程序；对于写操作而言，当操作系统将write方法传递的流写入完毕时，操作系统主动通知应用程序。 即可以理解为，read/write方法都是异步的，完成后会主动调用回调函数

### 多路复用器
- 为什么 Redis 中要使用 I/O 多路复用这种技术呢？

  ```
  首先，Redis 是跑在单线程中的，所有的操作都是按照顺序线性执行的，但是由于读写操作等待用户输入或输出都是阻塞的，所以 I/O 操作在一般情况下往往不能直接返回，这会导致某一文件的 I/O 阻塞导致整个进程无法对其它客户提供服务，而 I/O 多路复用就是为了解决这个问题而出现的
  ```


### Redis线程模型
[![cFdOGF.png](https://z3.ax1x.com/2021/03/30/cFdOGF.png)](https://imgtu.com/i/cFdOGF)



